{{#extends "base"}}

{{#block "title"}}
Appointments
{{/block}}


{{#block "content"}}
<h2>Appointments</h2>
<form method="get">
    <div class="row my-4">
        <div class="col-auto">
            <label class="col-form-label">Search by Name:</label>
        </div>
        <div class="col-auto">
            <select class="form-select" aria-label="Select Patient" name="patient_id">
                <option value=""></option>
                {{#each patients}}
                    <option value="{{this.patient_id}}">{{this.name}}</option>
                {{/each}}
            </select>
        </div>
    </div>
    <div class="row my-4">
        <div class="col-auto">
            <label class="col-form-label">Search By Doctor:</label>
        </div>
        <div class="col-auto">
            <select class="form-select" aria-label="Select Doctor" name="doctor_id">
                <option value=""></option>
                {{#each doctors}}
                    <option value="{{this.doctor_id}}">{{this.name}}</option>
                {{/each}}
            </select>
        </div>
    </div>
    <div class="row my-4">
        <div class="col-auto">
            <label class="col-form-label">Search By Appointment Type:</label>
        </div>
        <div class="col-auto">
            <select class="form-select" aria-label="Select Appointment Type" name="appt_type_id">
                <option value=""></option>
                {{#each appt_types}}
                    <option value="{{this.appt_type_id}}">{{this.name}}</option>
                {{/each}}
            </select>
        </div>
    </div>
    <div class="row my-4">
        <div class="col-auto">
            <label class="col-form-label">Search By Clinic:</label>
        </div>
        <div class="col-auto">
            <select class="form-select" aria-label="Select Clinic" name="clinic_id">
                <option value=""></option>
                {{#each clinics}}
                    <option value="{{this.clinic_id}}">{{this.name}}</option>
                {{/each}}
            </select>
        </div>
        <div class="col-auto">
            <input type="submit" value="Search" class="btn btn-primary">
            <a href="/appointments" class="btn btn-primary">Reset</a>
        </div>
    </div>
</form>
<div class="table-responsive">
    <table class="table table-striped table-dark table-hover align-middle">
        <thead>
            <th>Patient Name</th>
            <th>Doctor</th>
            <th>Clinic</th>
            <th>Appointment Type</th>
            <th>Date</th>
            <th>Time</th>
            <th></th>
            <th></th>
        </thead>
        <tbody>
            {{#each appointments}}
            <tr>
                <td>{{this.P_name}}</td>
                <td>{{this.D_name}}</td>
                <td>{{this.C_name}}</td>
                <td>{{this.apt_name}}</td>
                <td>{{this.date}}</td>
                <td>{{this.time}}</td>
                <td><a href="/appointments/edit/{{this.appointment_id}}" class="btn btn-warning">Edit</a></td>
                <td><a href="/appointments/delete/{{this.appointment_id}}" class="btn btn-danger">Delete</a></td>
            </tr>
            {{/each}}
        </tbody>
    </table>
</div>
<a href="/appointments/create" class="btn btn-primary">Create Appointment</a>
{{/block}}

{{/extends}}